<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TUST: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="content">
<div id="content2">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TUST
   </div>
   <div id="projectbrief">Script Library and Template Collection for Gamestudio A8</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">State Machines<div class="ingroups"><a class="el" href="group___generic_script_library.html">Generic Script Library</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Function pointer based state machine collection manager.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:state__machine_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8h.html">state_machine.h</a></td></tr>
<tr class="memdesc:state__machine_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine collection manager header. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:state__machine_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8c.html">state_machine.c</a></td></tr>
<tr class="memdesc:state__machine_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine collection manager code. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:test__state__machine_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test__state__machine_8c.html">test_state_machine.c</a></td></tr>
<tr class="memdesc:test__state__machine_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine collection manager test code. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga26b2fc1db6250cd81d6f92e6c8119714"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga26b2fc1db6250cd81d6f92e6c8119714"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga26b2fc1db6250cd81d6f92e6c8119714">STMC_SAFE_MODE</a></td></tr>
<tr class="memdesc:ga26b2fc1db6250cd81d6f92e6c8119714"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for NULL pointers. <br/></td></tr>
<tr class="separator:ga26b2fc1db6250cd81d6f92e6c8119714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad3986c4fa89f8ef253b61d8adfd96ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaad3986c4fa89f8ef253b61d8adfd96ce"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gaad3986c4fa89f8ef253b61d8adfd96ce">STMC_ERRORS</a></td></tr>
<tr class="memdesc:gaad3986c4fa89f8ef253b61d8adfd96ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to describe the errors ;) <br/></td></tr>
<tr class="separator:gaad3986c4fa89f8ef253b61d8adfd96ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga375a328cb14a3bc0605ec15ac56505c2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga375a328cb14a3bc0605ec15ac56505c2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga375a328cb14a3bc0605ec15ac56505c2">STMC_COUNT</a></td></tr>
<tr class="memdesc:ga375a328cb14a3bc0605ec15ac56505c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show global state machine collections count. <br/></td></tr>
<tr class="separator:ga375a328cb14a3bc0605ec15ac56505c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4aa4c547cd7652a957090e28eb752bc4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4aa4c547cd7652a957090e28eb752bc4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga4aa4c547cd7652a957090e28eb752bc4">STMC_MEMSTEP</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga4aa4c547cd7652a957090e28eb752bc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machines count into each memory allocation step. <br/></td></tr>
<tr class="separator:ga4aa4c547cd7652a957090e28eb752bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad0ad7ec76c4f5ba85422ea6dde2c8df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gaad0ad7ec76c4f5ba85422ea6dde2c8df">stm_create_index</a>(i)&#160;&#160;&#160;i=(int*)sys_malloc(sizeof(int))</td></tr>
<tr class="memdesc:gaad0ad7ec76c4f5ba85422ea6dde2c8df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an integer variable and cast its pointer to another type.  <a href="#gaad0ad7ec76c4f5ba85422ea6dde2c8df">More...</a><br/></td></tr>
<tr class="separator:gaad0ad7ec76c4f5ba85422ea6dde2c8df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5d078c72af9c3a74ed46f93c510b834"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gad5d078c72af9c3a74ed46f93c510b834">stm_delete_index</a>(i)&#160;&#160;&#160;sys_free(i)</td></tr>
<tr class="memdesc:gad5d078c72af9c3a74ed46f93c510b834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete an integer variable created with stm_create_index.  <a href="#gad5d078c72af9c3a74ed46f93c510b834">More...</a><br/></td></tr>
<tr class="separator:gad5d078c72af9c3a74ed46f93c510b834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e94045480d4d46dd10b70107ef3a699"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga6e94045480d4d46dd10b70107ef3a699">stm_index_ptr</a>(i)&#160;&#160;&#160;(int*)i</td></tr>
<tr class="memdesc:ga6e94045480d4d46dd10b70107ef3a699"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pointer saved in the variable used as a pointer to an integer.  <a href="#ga6e94045480d4d46dd10b70107ef3a699">More...</a><br/></td></tr>
<tr class="separator:ga6e94045480d4d46dd10b70107ef3a699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa15bcf3e330a8449208605cac0aeb85b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gaa15bcf3e330a8449208605cac0aeb85b">stm_state</a>(stmt)&#160;&#160;&#160;stmt-&gt;state</td></tr>
<tr class="memdesc:gaa15bcf3e330a8449208605cac0aeb85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A state identify number of a state machine.  <a href="#gaa15bcf3e330a8449208605cac0aeb85b">More...</a><br/></td></tr>
<tr class="separator:gaa15bcf3e330a8449208605cac0aeb85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc650fec0f8b57dccbc31f6f61249001"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gadc650fec0f8b57dccbc31f6f61249001">stm_me</a>(stmt)&#160;&#160;&#160;stmt-&gt;ptrMe</td></tr>
<tr class="memdesc:gadc650fec0f8b57dccbc31f6f61249001"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pointer to the object of a state machine.  <a href="#gadc650fec0f8b57dccbc31f6f61249001">More...</a><br/></td></tr>
<tr class="separator:gadc650fec0f8b57dccbc31f6f61249001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae31c53623d575c4aa2c5765bf59dc1c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gae31c53623d575c4aa2c5765bf59dc1c5">stm_stop</a>(stmt)&#160;&#160;&#160;<a class="el" href="group___state_machine_module.html#ga80e5e0d7f1db1a496f299586e56576e3">stm_set_state</a>(stmt,stm_stop_machine,NULL)</td></tr>
<tr class="memdesc:gae31c53623d575c4aa2c5765bf59dc1c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop a state machine in the next frame.  <a href="#gae31c53623d575c4aa2c5765bf59dc1c5">More...</a><br/></td></tr>
<tr class="separator:gae31c53623d575c4aa2c5765bf59dc1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38e80b1ecb187900fc2478926e38b0b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga38e80b1ecb187900fc2478926e38b0b7">stm_index</a>(i)&#160;&#160;&#160;*((int*)i)</td></tr>
<tr class="memdesc:ga38e80b1ecb187900fc2478926e38b0b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The content of an integer pointed by a pointer casted into another type variable.  <a href="#ga38e80b1ecb187900fc2478926e38b0b7">More...</a><br/></td></tr>
<tr class="separator:ga38e80b1ecb187900fc2478926e38b0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8253c914d52a34cd97be3bdc61c5f8b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga8253c914d52a34cd97be3bdc61c5f8b8">stm_by_index</a>(i)&#160;&#160;&#160;(gblMachines-&gt;stmFirst+i)</td></tr>
<tr class="memdesc:ga8253c914d52a34cd97be3bdc61c5f8b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pointer to the nth state machine.  <a href="#ga8253c914d52a34cd97be3bdc61c5f8b8">More...</a><br/></td></tr>
<tr class="separator:ga8253c914d52a34cd97be3bdc61c5f8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga944bf9db401055adcc3573257a8d5938"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga944bf9db401055adcc3573257a8d5938"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga944bf9db401055adcc3573257a8d5938">stm_open</a> ()</td></tr>
<tr class="memdesc:ga944bf9db401055adcc3573257a8d5938"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the state machines automation. <br/></td></tr>
<tr class="separator:ga944bf9db401055adcc3573257a8d5938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ea89aab8486d2de2cba00830653b15a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6ea89aab8486d2de2cba00830653b15a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga6ea89aab8486d2de2cba00830653b15a">stm_close</a> ()</td></tr>
<tr class="memdesc:ga6ea89aab8486d2de2cba00830653b15a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish the state machines automation. <br/></td></tr>
<tr class="separator:ga6ea89aab8486d2de2cba00830653b15a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9630ea3ce1581119ae2e9ea704ddf10b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga9630ea3ce1581119ae2e9ea704ddf10b">stm_add</a> (void *obj, void *remover, void *fnc, var state, int *index)</td></tr>
<tr class="memdesc:ga9630ea3ce1581119ae2e9ea704ddf10b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new state machine.  <a href="#ga9630ea3ce1581119ae2e9ea704ddf10b">More...</a><br/></td></tr>
<tr class="separator:ga9630ea3ce1581119ae2e9ea704ddf10b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80e5e0d7f1db1a496f299586e56576e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga80e5e0d7f1db1a496f299586e56576e3">stm_set_state</a> (STMACHINE *stm, void *fnc, var state)</td></tr>
<tr class="memdesc:ga80e5e0d7f1db1a496f299586e56576e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change a state of a machine.  <a href="#ga80e5e0d7f1db1a496f299586e56576e3">More...</a><br/></td></tr>
<tr class="separator:ga80e5e0d7f1db1a496f299586e56576e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17a393f2b8a1c23e82e6a448ca0d0cd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#ga17a393f2b8a1c23e82e6a448ca0d0cd5">stm_set_me</a> (STMACHINE *stm, void *obj, void *remover)</td></tr>
<tr class="memdesc:ga17a393f2b8a1c23e82e6a448ca0d0cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the object of a machine.  <a href="#ga17a393f2b8a1c23e82e6a448ca0d0cd5">More...</a><br/></td></tr>
<tr class="separator:ga17a393f2b8a1c23e82e6a448ca0d0cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade6d7b9e5adae1ce1cb8361dd509d2bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___state_machine_module.html#gade6d7b9e5adae1ce1cb8361dd509d2bb">stm_stop_ptr</a> (void *obj)</td></tr>
<tr class="memdesc:gade6d7b9e5adae1ce1cb8361dd509d2bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop all the state machines that point to a certain object.  <a href="#gade6d7b9e5adae1ce1cb8361dd509d2bb">More...</a><br/></td></tr>
<tr class="separator:gade6d7b9e5adae1ce1cb8361dd509d2bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Function pointer based state machine collection manager. </p>
<p>A state machine is a code structure that changes the execution flow in reference to the state of a variable. A function pointer based state machine is the same concept but it references a function to be executed next frame instead of checking a variable value.</p>
<p>This module offers the possibility of running state machines for any kind of data, even without any data. It is conceived to ensure that the actual state of every object is executed before been changed by another machine. This characteristic avoids the inherent advantage of the execution order. It has also the minor benefit of executing all the machines from a single array pass inside a single while loop. The state machines will be executed in the same order they were created</p>
<h1>How to use these state machine</h1>
<ul>
<li>Include TUST library into your project.</li>
<li>Start the state machines manager. <div class="fragment"><div class="line"><span class="comment">// Funtion to be executed by a state machine</span></div>
<div class="line"><span class="keyword">function</span> myState1 ( STMACHINE *stm ) </div>
<div class="line">{</div>
<div class="line">   <span class="comment">// Retrieve the object of the machine</span></div>
<div class="line">   MyStruct *myStruct = <a class="code" href="group___state_machine_module.html#gadc650fec0f8b57dccbc31f6f61249001" title="The pointer to the object of a state machine.">stm_me</a> ( stm ); </div>
<div class="line">   you = <a class="code" href="group___state_machine_module.html#ga8253c914d52a34cd97be3bdc61c5f8b8" title="The pointer to the nth state machine.">stm_by_index</a> ( stm ); <span class="comment">// Retrieve an object by its index</span></div>
<div class="line">   <a class="code" href="group___state_machine_module.html#ga80e5e0d7f1db1a496f299586e56576e3" title="Change a state of a machine.">stm_set_state</a> ( stm, stEnt2, 2 );</div>
<div class="line">   my-&gt;clock += 20+random(30);</div>
<div class="line">}</div>
<div class="line">...</div>
<div class="line">stm_open ();</div>
<div class="line">...</div>
</div><!-- fragment --></li>
<li></li>
</ul>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga8253c914d52a34cd97be3bdc61c5f8b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_by_index</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i</td><td>)</td>
          <td>&#160;&#160;&#160;(gblMachines-&gt;stmFirst+i)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The pointer to the nth state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index into the state machines array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaad0ad7ec76c4f5ba85422ea6dde2c8df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_create_index</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i</td><td>)</td>
          <td>&#160;&#160;&#160;i=(int*)sys_malloc(sizeof(int))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an integer variable and cast its pointer to another type. </p>
<p>Use it when you want to use an entity or panel (etc) skill as state machine index allocator</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Fixed variable (var) to use as pointer to an integer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad5d078c72af9c3a74ed46f93c510b834"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_delete_index</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i</td><td>)</td>
          <td>&#160;&#160;&#160;sys_free(i)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete an integer variable created with stm_create_index. </p>
<p>It has to be called after using stm_create_index</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Fixed variable (var) used as pointer to an integer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga38e80b1ecb187900fc2478926e38b0b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_index</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i</td><td>)</td>
          <td>&#160;&#160;&#160;*((int*)i)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The content of an integer pointed by a pointer casted into another type variable. </p>
<p>Use it when you used an entity or panel (etc) skill as state machine index allocator</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Fixed variable (var) to be casted to an integer pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6e94045480d4d46dd10b70107ef3a699"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_index_ptr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i</td><td>)</td>
          <td>&#160;&#160;&#160;(int*)i</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The pointer saved in the variable used as a pointer to an integer. </p>
<p>Use it into last parameter of stm_add function when stm_create_index is used</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Fixed variable (var) used as pointer to an integer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gadc650fec0f8b57dccbc31f6f61249001"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_me</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stmt</td><td>)</td>
          <td>&#160;&#160;&#160;stmt-&gt;ptrMe</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The pointer to the object of a state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>A pointer to a state machine </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaa15bcf3e330a8449208605cac0aeb85b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_state</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stmt</td><td>)</td>
          <td>&#160;&#160;&#160;stmt-&gt;state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A state identify number of a state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>A pointer to a state machine </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gae31c53623d575c4aa2c5765bf59dc1c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define stm_stop</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stmt</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group___state_machine_module.html#ga80e5e0d7f1db1a496f299586e56576e3">stm_set_state</a>(stmt,stm_stop_machine,NULL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop a state machine in the next frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stmt</td><td>A pointer to a state machine </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9630ea3ce1581119ae2e9ea704ddf10b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* stm_add </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>remover</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fnc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">var&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a new state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>A pointer to an object. It can be NULL too. </td></tr>
    <tr><td class="paramname">remover</td><td>A function that removes the object, If NULL the object will not be removed when the state machine is removed </td></tr>
    <tr><td class="paramname">fnc</td><td>The state machine starting function. It can't be NULL! </td></tr>
    <tr><td class="paramname">state</td><td>a number to identify the starting function. Just a helper. Not used. </td></tr>
    <tr><td class="paramname">index</td><td>a pointer to an integer that will be filled with the actual index in the global state machines array. Since the state machines memory location is dynamic, their index into the array and memory address changes with the flow so this integer is used as a secure and fast reference to the new state machine. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the object. </dd></dl>

</div>
</div>
<a class="anchor" id="ga17a393f2b8a1c23e82e6a448ca0d0cd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stm_set_me </td>
          <td>(</td>
          <td class="paramtype">STMACHINE *&#160;</td>
          <td class="paramname"><em>stm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>remover</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the object of a machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stm</td><td>A pointer to a state machine </td></tr>
    <tr><td class="paramname">obj</td><td>A pointer to an object </td></tr>
    <tr><td class="paramname">remover</td><td>A function that deletes the object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga80e5e0d7f1db1a496f299586e56576e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stm_set_state </td>
          <td>(</td>
          <td class="paramtype">STMACHINE *&#160;</td>
          <td class="paramname"><em>stm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fnc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">var&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change a state of a machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stm</td><td>A pointer to a state machine </td></tr>
    <tr><td class="paramname">fnc</td><td>Function to execute in the new state </td></tr>
    <tr><td class="paramname">state</td><td>A number to identify the new state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gade6d7b9e5adae1ce1cb8361dd509d2bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stm_stop_ptr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop all the state machines that point to a certain object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>A pointer to an object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 2 2013 19:00:23 for TUST by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
